// 100元素向量逐元素乘法: C[i] = A[i] * B[i]
// 使用快速乘（RV32I 无 MUL 指令）

// 快速乘: O(log b)
int multiply(int a, int b) {
    int result = 0;
    int neg = 0;
    
    if (a < 0) { a = -a; neg = !neg; }
    if (b < 0) { b = -b; neg = !neg; }
    
    while (b) {
        if (b & 1) result += a;
        a <<= 1;
        b >>= 1;
    }
    
    return neg ? -result : result;
}

// 全局数组 (10-99 范围，乘积最大约 9801，不会溢出)
int A[100] = {
    16, 44, 21, 62, 44, 23, 14, 58, 78, 81,
    52, 53, 16, 30, 27, 53, 81, 52, 99, 41,
    30, 10, 65, 21, 86, 58, 18, 10, 50, 67,
    23, 15, 21, 95, 28, 26, 12, 47, 65, 83,
    71, 43, 70, 14, 49, 53, 76, 71, 36, 87,
    91, 77, 82, 50, 11, 60, 92, 75, 65, 97,
    78, 91, 95, 86, 72, 76, 95, 63, 57, 75,
    14, 92, 33, 20, 72, 94, 43, 31, 52, 53,
    80, 60, 19, 68, 59, 83, 53, 12, 34, 85,
    21, 90, 56, 11, 55, 39, 61, 78, 74, 17
};

int B[100] = {
    91, 46, 73, 90, 39, 79, 71, 32, 29, 78,
    66, 58, 69, 15, 11, 27, 68, 34, 12, 42,
    55, 97, 44, 65, 91, 63, 10, 23, 89, 18,
    75, 55, 21, 20, 65, 11, 78, 58, 19, 79,
    98, 91, 61, 13, 51, 43, 70, 14, 81, 52,
    63, 54, 13, 91, 91, 30, 63, 18, 96, 28,
    57, 95, 40, 20, 90, 17, 76, 59, 78, 49,
    28, 93, 47, 59, 57, 26, 78, 53, 76, 25,
    90, 31, 85, 59, 65, 17, 27, 68, 95, 12,
    54, 67, 95, 67, 48, 64, 13, 30, 76, 51
};

int C[100];

// 预期结果 A[i] * B[i]
int expected[100] = {
    1456, 2024, 1533, 5580, 1716, 1817, 994, 1856, 2262, 6318,
    3432, 3074, 1104, 450, 297, 1431, 5508, 1768, 1188, 1722,
    1650, 970, 2860, 1365, 7826, 3654, 180, 230, 4450, 1206,
    1725, 825, 441, 1900, 1820, 286, 936, 2726, 1235, 6557,
    6958, 3913, 4270, 182, 2499, 2279, 5320, 994, 2916, 4524,
    5733, 4158, 1066, 4550, 1001, 1800, 5796, 1350, 6240, 2716,
    4446, 8645, 3800, 1720, 6480, 1292, 7220, 3717, 4446, 3675,
    392, 8556, 1551, 1180, 4104, 2444, 3354, 1643, 3952, 1325,
    7200, 1860, 1615, 4012, 3835, 1411, 1431, 816, 3230, 1020,
    1134, 6030, 5320, 737, 2640, 2496, 793, 2340, 5624, 867
};

int main() {
    int n = 100;
    
    // 向量逐元素乘法
    for (int i = 0; i < n; i++) {
        C[i] = multiply(A[i], B[i]);
    }
    
    // 逐个验证每个元素
    int correct = 0;
    for (int i = 0; i < n; i++) {
        if (C[i] == expected[i]) correct++;
    }
    
    return correct;  // 预期: 100 (全部正确)
}
